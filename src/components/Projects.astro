---
import "../styles/projects.css";
import "../styles/global.css";
---


<section class="projects-section">
  <!-- Title and Introduction -->
  <div class="projects-header">
    <div class="projects-intro">
      <h2 class="projects-title">Our Projects.</h2>
      <p class="projects-description">
        Explore some of our featured remodeling projects across Maryland. From
        kitchens and bathrooms to full home makeovers, we bring quality and
        creativity into every space.
      </p>
    </div>

    <img
      src="public/icons/boton-rigth.png"
      alt="Projects"
      class="projects-image"
    />
  </div>

  <!-- Project Content -->
  <div class="project-content">
    <!-- Categories List -->
    <div class="project-categories">
      <ul class="categories-list">
        <li class="category-item">
          ALL PROJECTS <span class="category-count">12</span>
        </li>
        <li class="category-item">
          KITCHEN REMODELING <span class="category-count">3</span>
        </li>
        <li class="category-item">
          BATHROOM REMODELING <span class="category-count">3</span>
        </li>
        <li class="category-item">
          BASEMENT REMODELING <span class="category-count">1</span>
        </li>
        <li class="category-item">
          WINDOW & DOOR REPLACEMENT <span class="category-count">5</span>
        </li>
      </ul>
    </div>

    <!-- Featured Projects Slider -->
    <div class="slider-container">
      <!-- Imágenes -->
      <div class="slider-track ">
        <img
          id="image1"
          src="public/icons/project1.png"
          class="slider-img"
        />
        <img id="image2" src="public/icons/project2.png" class="slider-img" />

      </div>

      <!-- Flechas -->
      <div class="slider-controls">
        <img
          src="public/icons/boton-left.png"
          class="slider-btn left"
        />
        <img
          src="public/icons/boton-rigth-white.png"
          class="slider-btn right"
        />
      </div>
    </div>
  </div>
</section>

<script is:inline>
    document.addEventListener("DOMContentLoaded", () => {
      const track = document.querySelector(".slider-track");
      const images = document.querySelectorAll(".slider-img");
      const btnLeft = document.querySelector(".slider-btn.left");
      const btnRight = document.querySelector(".slider-btn.right");
  
      const imageWidth = images[0].clientWidth + 10;
      let current = 1;
  
      // Clonar primera y última imagen
      const firstClone = images[0].cloneNode(true);
      const lastClone = images[images.length - 1].cloneNode(true);
  
      track.appendChild(firstClone);
      track.insertBefore(lastClone, images[0]);
  
      const allImages = document.querySelectorAll(".slider-img");
  
      function updateSlider(animate = true) {
        if (!animate) {
          track.style.transition = "none";
        } else {
          track.style.transition = "transform 0.8s ease-in-out";
        }
        track.style.transform = `translateX(-${current * imageWidth}px)`;
      }
  
      btnRight.addEventListener("click", () => {
        if (current >= allImages.length - 1) return;
        current++;
        updateSlider();
      });
  
      btnLeft.addEventListener("click", () => {
        if (current <= 0) return;
        current--;
        updateSlider();
      });
  
      // Rebote al principio o final
      track.addEventListener("transitionend", () => {
        if (allImages[current].isSameNode(firstClone)) {
          current = 1;
          updateSlider(false);
        } else if (allImages[current].isSameNode(lastClone)) {
          current = allImages.length - 2;
          updateSlider(false);
        }
      });
  
      updateSlider(false); // Posiciona en la 1ra real
    });
  </script>
  